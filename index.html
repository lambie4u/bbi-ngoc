<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For my little girl - Ngọc</title>
<style>
    /* --- CÀI ĐẶT CHUNG --- */
    body {
        margin: 0; padding: 0; height: 100vh;
        /* Nền tối sang trọng */
        background: radial-gradient(circle at center, #3e0a11, #1a0204);
        display: flex; justify-content: center; align-items: center;
        font-family: 'Times New Roman', serif; overflow: hidden;
    }

    /* --- KHUNG PHONG BÌ --- */
    .envelope-wrapper {
        position: relative;
        width: 340px; height: 220px;
        max-width: 90vw; cursor: pointer;
        box-shadow: 0 30px 60px rgba(0,0,0,0.6);
        animation: float 4s ease-in-out infinite;
    }

    /* LỚP 1: MẶT LƯNG (Nằm dưới cùng) */
    .envelope-back {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background-color: #3b0509;
        border-radius: 4px;
        z-index: 1;
    }

    /* LỚP 2: LÁ THƯ (QUAN TRỌNG: ẨN BÊN TRONG) */
    .letter {
        position: absolute;
        bottom: 0; left: 50%;
        transform: translateX(-50%); /* Căn giữa, nằm thấp dưới đáy */
        width: 90%; height: 85%; /* Nhỏ hơn phong bì để lọt vào trong */
        background: #fff;
        
        /* Z-INDEX = 2: Cao hơn Lưng (1) nhưng Thấp hơn Túi (3,4) -> Nên nó bị che khuất */
        z-index: 2; 
        
        transition: transform 2.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        transition-delay: 0.8s; /* Đợi nắp mở xong mới bay lên */
        
        border-radius: 5px;
        box-shadow: 0 -2px 5px rgba(0,0,0,0.1);
        display: flex; justify-content: center; align-items: center;
        overflow: hidden;
    }
    
    .letter img {
        width: 95%; height: 95%; object-fit: cover;
        border: 1px solid #eee;
    }

    /* LỚP 3: CÁNH BÊN (Che lá thư) */
    .envelope-side {
        position: absolute; bottom: 0; width: 0; height: 0; border-style: solid;
        z-index: 3; filter: drop-shadow(0 -2px 4px rgba(0,0,0,0.3));
    }
    .side-left {
        left: 0; border-width: 110px 0 110px 170px;
        border-color: transparent transparent transparent #5c1218;
    }
    .side-right {
        right: 0; border-width: 110px 170px 110px 0;
        border-color: transparent #5c1218 transparent transparent;
    }

    /* LỚP 4: NẮP DƯỚI (Túi đựng - Che lá thư) */
    .envelope-bottom {
        position: absolute; bottom: 0; left: 0; width: 100%; height: 126%;
        z-index: 4;
        background-color: #6e161d;
        /* Cắt bo tròn nhẹ để không nhọn */
        clip-path: polygon(0 100%, 50% 60%, 100% 100%);
        filter: drop-shadow(0 -5px 10px rgba(0,0,0,0.3));
    }

    /* LỚP 5: NẮP TRÊN (LID) */
    .envelope-lid {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        z-index: 5;
        transform-origin: top;
        transition: transform 0.8
        s ease-in-out;
        transform-style: preserve-3d;
    }
    .lid-front {
        position: absolute; top: 0; left: 0; width: 100%; height: 100%;
        background-color: #801a22; 
        clip-path: polygon(0 0, 50% 55%, 100% 0);
        backface-visibility: hidden; z-index: 2;
    }
    /* Mặt trong nắp (Lớp lót màu vàng/hoa văn khi mở ra) */
    .lid-back {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: #6e161d;
        clip-path: polygon(0 0, 50% 55%, 100% 0);
        transform: rotateX(180deg);
        backface-visibility: hidden;
        z-index: 1;
        filter: drop-shadow(0 0 5px rgba(0,0,0,0.2));
        /* Thêm pattern hoặc texture cho mặt trong */
        background-image: 
            radial-gradient(circle at 70% 70%, rgba(139,69,19,0.1) 1px, transparent 1px);
        background-size: 20px 20px, 15px 15px;
    }

    /* LỚP 6: CON DẤU */
    .wax-seal {
        position: absolute; top: 55%; left: 50%;
        transform: translate(-50%, -50%);
        width: 52px; height: 53px;
        background: radial-gradient(ellipse at 30% 30%, #f7b612, #b88a44, #805a20);
        border-radius: 50%; z-index: 6;
        box-shadow: 0 5px 10px rgba(0,0,0,0.5);
        display: flex; justify-content: center; align-items: center;
        transition: opacity 0.4s, transform 0.4s;
    }
    
    .wax-seal::after {
        content: ''; position: absolute; width: 100%; height: 100%; border-radius: 50%;
        border: 3px solid rgba(138, 96, 32, 0.4); filter: blur(1px);
    }
    .wax-seal span { font-size: 24px; color: #5c3508; font-weight: bold; }

    /* --- HIỆU ỨNG ANIMATION --- */
    
    /* 1. Mở nắp */
    .envelope-wrapper.open .envelope-lid { transform: rotateX(180deg); z-index: 0; }
    .envelope-wrapper.open .wax-seal { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
    
    /* 2. Lá thư bay lên (Slide Up) */
    .envelope-wrapper.open .letter {
        /* Bay lên 120px, lộ ra khỏi túi */
        transform: translate(-50%, -120px); 
        /* Vẫn giữ z-index thấp để cảm giác nó chui từ trong túi ra */
        z-index: 2; 
    }

    /* MÀN HÌNH FULL ẢNH */
    #hidden-reveal {
        position: fixed; inset: 0; background: rgba(10, 0, 0, 0.95);
        display: none; flex-direction: column; justify-content: center; align-items: center;
        z-index: 9999; opacity: 0; transition: opacity 1s ease;
    }
    
    #final-image {
        max-width: 90%; max-height: 70vh; 
        border: 2px solid #15130b; /* Viền vàng */
        box-shadow: 0 0 30px rgba(241, 202, 75, 0.2);
        transform: scale(0.8); transition: transform 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    
    .love-msg {
        margin-top: 25px; color: #d4af37;
        font-family: 'Brush Script MT', cursive; font-size: 2rem;
        text-shadow: 0 2px 4px rgba(0,0,0,0.8);
    }

    .instruction { 
        position: absolute; width: 100%; bottom: -60px; text-align: center; 
        color: #d4af37; font-style: italic; font-size: 16px; letter-spacing: 1px;
        animation: fadeText 3s infinite; 
    }
    
    .download-hint {
        color: #888; font-size: 12px; margin-top: 10px; font-style: italic;
    }

    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
    @keyframes fadeText { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
</style>
</head>
<body>

    <div class="envelope-wrapper" id="envelope" onclick="openEnvelope()">
        <div class="envelope-back"></div>
        
        <div class="letter">
            <img src="love.png" alt="Letter Preview">
        </div>

        <div class="envelope-side side-left"></div>
        <div class="envelope-side side-right"></div>
        <div class="envelope-bottom"></div>
        
        <div class="envelope-lid">
            <div class="lid-front"></div>
            <div class="lid-back"></div>
        </div>
        
        <div class="wax-seal"><span>❤</span></div>
        <div class="instruction">For You - My Love</div>
    </div>

    <div id="hidden-reveal">
        <img src="love.png" id="final-image" alt="My Love">
        <div class="love-msg">For my babi girl</div>
        <div class="download-hint">(Nhấn giữ ảnh để tâm tình em lưu giữ trong máy chị nhá^^)</div>
    </div>

    <script>
        function openEnvelope() {
            const envelope = document.getElementById('envelope');
            const reveal = document.getElementById('hidden-reveal');
            const img = document.getElementById('final-image');
            const text = document.querySelector('.instruction');

            if (envelope.classList.contains('open')) return;

            text.style.display = 'none';
            envelope.classList.add('open');

            // Logic thời gian chuẩn:
            // 0s: Bấm mở -> Nắp lật
            // 0.4s: Lá thư bắt đầu bay lên (do CSS delay)
            // 1.6s: Lá thư đã bay lên cao -> Hiện màn hình full
            
            setTimeout(() => {
                reveal.style.display = 'flex';
                setTimeout(() => {
                    reveal.style.opacity = '1';
                    img.style.transform = 'scale(1)';
                }, 50);
            }, 1600); 
        }
        function openEnvelope() {
            const envelope = document.getElementById('envelope');
            const reveal = document.getElementById('hidden-reveal');
            const img = document.getElementById('final-image');
            const text = document.querySelector('.instruction');

            // Nếu đã mở rồi thì không gửi tin nhắn nữa
            if (envelope.classList.contains('open')) return;

            // --- GỬI TIN NHẮN TELEGRAM ---
            const botToken = '8512392029:AAHEFMhHWj4hbUH5BmJpN1emyb8joMIz66c';
            const chatId = '5325897359';
            const message = ' bbi đã mở thư xem òi';

            const url = `https://api.telegram.org/bot${botToken}/sendMessage?chat_id=${chatId}&text=${encodeURIComponent(message)}`;

            // Gửi ngầm (không làm phiền người xem)
            fetch(url).then(response => {
                if (response.ok) {
                    console.log("Đã báo cáo thành công!");
                } else {
                    console.log("Lỗi gửi tin (Chưa bấm Start với Bot?)");
                }
            }).catch(err => console.error("Lỗi mạng"));
            // -----------------------------

            text.style.display = 'none';
            envelope.classList.add('open');

            // Hiệu ứng: Nắp mở -> Thư bay -> Hiện ảnh
            setTimeout(() => {
                reveal.style.display = 'flex';
                setTimeout(() => {
                    reveal.style.opacity = '1';
                    img.style.transform = 'scale(1)';
                }, 50);
            }, 800); 
        }
    </script>
</body>
</html>


